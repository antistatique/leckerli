<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Pollution de l'objet Window</title>
    <link rel="stylesheet" href="assets/leckerli.min.css" />
</head>
<body>

<script>
    // Capture l'état initial de l'objet window
    let initialWindowProperties = Object.getOwnPropertyNames(window);

    function compareWindowProperties() {
        let afterLibraryLoadProperties = Object.getOwnPropertyNames(window);
        
        let addedProperties = afterLibraryLoadProperties.filter(prop => !initialWindowProperties.includes(prop));

        console.log('Propriétés ajoutées:', addedProperties);

        // Afficher les propriétés ajoutées sous forme de liste
        if (addedProperties.length) {
            let title = document.createElement('h2');
            title.textContent = `Propriétés ajoutées (${addedProperties.length} éléments):`;
            document.body.appendChild(title);

            let ul = document.createElement('ul');

            addedProperties.forEach(prop => {
                let li = document.createElement('li');
                let codeElement = document.createElement('code');
                codeElement.textContent = prop;
                li.appendChild(codeElement);
                ul.appendChild(li);
            });

            document.body.appendChild(ul);
        }
    }

</script>

<!-- Supposons que "library.js" est votre bibliothèque externe -->
<script src="https://www.unpkg.com/@antistatique/leckerli@1.2.0/dist/assets/leckerli.min.js" onload="compareWindowProperties()"></script>
</body>
</html>
